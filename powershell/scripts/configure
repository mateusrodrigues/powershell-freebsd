#!/bin/sh

# restore all packages
dotnet restore --source ${WRKDIR}/.nuget/packages ${WRKSRC}/src/powershell-unix/powershell-unix.csproj
dotnet restore --source ${WRKDIR}/.nuget/packages ${WRKSRC}/src/ResGen/ResGen.csproj
dotnet restore --source ${WRKDIR}/.nuget/packages ${WRKSRC}/src/TypeCatalogGen/TypeCatalogGen.csproj

# copy necessary files
cp files/git-describe.txt ${WRKSRC}/git-describe.txt

# configure PowerShell-Native
cd ${WRKSRC}/external/powershell-native/src/libpsl-native && cmake -DCMAKE_BUILD_TYPE=${BUILD_CONFIGURATION} .
